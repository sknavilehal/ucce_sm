<!DOCTYPE html>
<html>

<head>
    <!--import stylesheet in flask format-->
    <link href="{{url_for('static', filename='css/cui-standard.min.css')}}" rel="stylesheet" type="text/css">
    <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <script src="{{url_for('static',filename='js/styleguide.js')}}"></script>
    <link href="{{url_for('static', filename='dropzone-5.7.0/dropzone-5.7.0/dist/min/dropzone.min.css')}}" rel="stylesheet" type="text/css">
    <script src="{{url_for('static' ,filename="dropzone-5.7.0/dropzone-5.7.0/dist/dropzone.js")}}"></script>
    
    <!--<script src="public/js/clipboard.js"></script>
    <script src="public/js/featherlight.min.js"></script>
    <script src="public/js/Markdown.Converter.js"></script>
    <script src="public/js/highlight.pack.js"></script>-->
    
    <meta charset="utf-8">
    <style>
        body.cui .btn
        {
            background-color: #0094eb;
    border-color: #0175a2;
    color: #f8f8f8;
}
        
        .dropzone {
  background: white;
  border-radius: 5px;
  border: 2px dashed rgb(0, 135, 247);
  border-image: none;
  max-width: 300px;
  margin-left: auto;
  margin-right: auto;
}
.center
{
    max-width: 300px;
    margin-top: 4rem;
  margin-left: auto;
  margin-right: auto;
   
}

.dropzone .dz-preview.dz-file-preview .dz-image
{
    background: #afddf7;
    width: 150px;
    height: 100px;
}

    </style>
</head>

<body class="cui" onload="initial()" data-theme="light" style="background-color: aliceblue;">...

    
    
    

    <div class="row base-margin-bottom">
        <div class="col-12">
            <header class="header header--compressed" style="height: 6rem;">
                <div class="container">
                    <div class="header-panels">
                        <div class="header-panel">
                            <a class="header__logo" href="http://www.cisco.com" target="_blank">
                                <span class="icon-cisco icon-size-32"  ></span>
                            </a>
                            <div class="header__title">
                                <h1 class="header__title" style="font-size: 2.5rem;font-weight:300;">CVP Log Analysis</h1> </div>
                        </div>
                       
        
                    </div>
                </div>
            </header>
        </div>
    </div>
    <div class="row base-margin-bottom">
        <div class="col-12">
            <nav id="styleguideSidebar" class="sidebar sidebar--mini sidebar--slate" role="navigation">
                <div class="sidebar__header">
                    <a id="sidebar-toggle" class="sidebar-toggle hidden-xs hidden-sm">
                        <span class="icon-toggle-menu"></span>
                    </a>
                    
                </div>
                <ul id="rootSidebar" data-kss-ref="styleguide.homepage">
                    <li class="sidebar__item sidebar__item--selected" id="section-gettingStarted">
                        <a onclick="doNav('/')"  title="Home">
                            <span class="icon-home"></span>
                            <span>Home</span>
                        </a>
                    </li>
                    <div id="visible" style="display: none;">
                    <li class="sidebar__item">
                        <a onclick="doNav('./files')" title="Getting Started">
                            <span class="icon-applications"></span>
                            <span>Files</span>
                        </a>
                    </li>
                    <li class="sidebar__item" >
                        <a onclick="doNav('/statistics')" title="Getting Started">
                            <span class="icon-data-usage"></span>
                            <span>Statistics</span>
                        </a>
                    </li>
                    </div>
                    
                    
                    <li class="sidebar__item">
                            <a onclick="doNav('./index.html')" title="Getting Started">
                                <span class="icon-feedback"></span>
                                <span>Feedback</span>
                            </a>
                    </li>
                </ul>
            </nav>

            <div class="row base-margin-bottom" style="position: relative;left: 10rem;top:5rem;margin-right: 20rem;">
                <div class="col-6">
                    <div class="row">
                    <form id="upload-widget" method="post" action="/uploads" class="dropzone"></form>
                   </div>
                   <div clas="row " >
                       <div class="center">
                        <button class="btn pull left" id="upload">Upload</button>
                    <button class="btn pull-right" id="upload-c">Upload Config</button>
                    </div>
                    </div>
                    <div class="row center">
                        <button class="btn  pull-right" onclick="doNav('./files')" id="upload-c" style="background-color: burlywood;
                        border-color:darkred;">View Files</button>
                    </div>
                    
                </div>
                <div class="col-6">
                    <div class="timeline">
                    <div class="timeline__item" >
                        <div class="timeline__icon">
                            <span class="icon-circle" ></span>
                        </div>
                        <div class="timeline__content" style="background-color: white;">
                            <div>
                                This tool analyzes the log files from multiple products in collaboration space and displays details about great amount of communications flows (calls, MRA logins, RTP/TCP/UDP streams, XMPP, STUN, etc.), configuration overview and diagnostic signatures
                                 highlighting known issues found and next action plan to resolve them
                            </div>
                        </div>
                    </div>
                    <div class="timeline__item">
                        <div class="timeline__icon">
                            <span class="icon-circle"></span>
                        </div>
                        <div class="timeline__content" style="background-color: white;">
                            <div>
                                Use this tool when troubleshooting any issue on your collaboration servers or endpoints. Diagnostic signatures will suggest next action plan in case any known issues were found. Alternatively, use the tool output to visualize and better
                                 understand the communication flows and configuration to troubleshoot the issue further


                            </div>
                        </div>
                    </div>
                    <div class="timeline__item">
                        <div class="timeline__icon">
                            <span class="icon-circle"></span>
                        </div>
                        <div class="timeline__content" style="background-color: white;">
                            <div>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse pulvinar accumsan leo, quis egestas quam luctus non. Aenean vulputate ullamcorper velit eu hendrerit</div>
                        </div>
                    </div>
                </div>
            </div>
            </div>
        </div>

        
    </div>

    
</body>
<script type="text/javascript">

function initial(){
$.ajax({
            type: 'GET',
            url: 'http://127.0.0.1:5000/api/files',
            
            contentType: false,
            cache: false,
            processData: false,
            success: function(data) {
                //alert('Success!');
                if(data.length>0)
                {
                    document.getElementById("visible").style.display="block"
                }
               
            }
        });
}
//alert("ggg")
   options = {
       url:'/uploads',
    acceptedFiles: '.txt,.log',
    addRemoveLinks: true,
    dictDefaultMessage: 'Drag a log file here to save, or click to select one',
    thumbnailWidth:'50px',
    removedfile: function(file) {
            file.previewElement.remove();
},
    autoProcessQueue: false,
    init: function () {

        var myDropzone = this;

        // Update selector to match your button
        $("#upload").click(function (e) {
            e.preventDefault();
            myDropzone.processQueue();
        });}
    
  };

const uploader = new Dropzone('#upload-widget', options);
$("#button").click(function (e) {
    e.preventDefault();
    uploader.processQueue();
});
</script>

</html>